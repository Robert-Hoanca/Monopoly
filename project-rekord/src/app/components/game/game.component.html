<div id="gameContainer" fxLayout="column" fxLayoutAlign="center center">

    <th-canvas (onResize)=resizeCanvas($event) [shadow]="true" [rendererParameters]="rendererOptions"><!--[style]="{background: this.gameService.sessionColor}" -->
        <th-scene [thStats]="true" [background]="['#ffff00']" >
            
            <th-ambientLight [color]="['#808080']"> </th-ambientLight>
            <th-pointLight
            #light
            [castShadow]="true"
            [shadowMapHeight]="1024"
            [shadowMapWidth]="1024"
            [position]="[-10,5,-10]"
            ></th-pointLight>
      
            <app-card *ngFor="let card of gameService.gameTable.cards;let i = index" [card]="card" [cardIndex]="i"></app-card>
            <app-player *ngFor="let player of gameService.players" [player]="player"></app-player>

            <th-object3D
                    loadGLTF
                    [url]="'/assets/blenderModels/Maps/islandMap.gltf'"
                    [position]="[10,0,10]"
                    [receiveShadow]="true"
            >
            </th-object3D>

            <th-perspectiveCamera
                [args]="[75, 2, 0.1, 1000]"
                [lookAt]="[0, 0, 0]"
                [position]="gameService.cameraPosition"
            >
                <!--<th-orbitControls></th-orbitControls>-->
                <th-mapControls></th-mapControls>
            </th-perspectiveCamera>
        </th-scene>
      </th-canvas>
      

    <div id="playersContainer" fxLayout="column" fxLayoutAlign="space-around center">
       
        <mat-card *ngFor="let player of gameService.players" fxLayout="column" fxLayoutAlign="center start">
            <span>{{player.name}}</span>
            <span>{{player.money}} â‚¬</span>
        </mat-card>
    </div>

    <div id="gameButtons" fxLayout="row" fxLayoutAlign="space-around center">
        <button mat-raised-button id="seeProperties" *ngIf="gameService.diceNumber" [matMenuTriggerFor]="propertiesMenu" [disabled]="!gameService.actualTurnPlayer.properties.length"><mat-icon>view_carousel</mat-icon></button>
        <mat-menu #propertiesMenu="matMenu">
            <button mat-menu-item *ngFor="let property of gameService.actualTurnPlayer.properties" (click)="gameService.openCardDialog(property)">{{property.name}}</button>
        </mat-menu>


          <button mat-raised-button id="openExchange" *ngIf="gameService.diceNumber" (click)="gameService.openExchangeDialog()"><mat-icon>currency_exchange</mat-icon></button>

        <button mat-raised-button id="nextTurnBtn" *ngIf="gameService.diceNumber" (click)="gameService.nextTurn()">next turn</button>

        <button mat-raised-button id="diceBtn" *ngIf="gameService.actualTurnPlayer.canDice" (click)="gameService.rollTheDice()"><mat-icon>casino</mat-icon></button>

    </div>

    
    <!--
        DELETE
        <button mat-raised-button id="blblbl" (click)="gameService.test()">click me</button>
        <button mat-raised-button (click)="gameService.setDB()">Set db</button>
    -->
        
       
</div>